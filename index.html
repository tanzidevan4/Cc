<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CC Generator - Ultra Glassified</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0a; /* Slightly lighter black */
            color: #e5e7eb; /* Light gray for better readability */
            overflow-x: hidden;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .glass {
            background: rgba(30, 30, 30, 0.5); /* Darker glass */
            backdrop-filter: blur(25px) saturate(150%);
            -webkit-backdrop-filter: blur(25px) saturate(150%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        input, select {
            background: rgba(10, 10, 10, 0.7) !important;
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #3b82f6; /* Blue focus color */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        thead {
            background: rgba(255, 255, 255, 0.05) !important;
        }

        tbody tr {
            background: transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.3s ease;
        }

        tbody tr:last-child {
            border-bottom: none;
        }

        tbody tr:hover {
            background: rgba(255, 255, 255, 0.04);
        }
        
        /* --- Upgraded Button Style --- */
        .btn-primary {
            background-image: linear-gradient(to right, #3b82f6 0%, #8b5cf6 51%, #3b82f6 100%);
            background-size: 200% auto;
            color: white;
            font-weight: bold;
            border-radius: 0.75rem; /* 12px */
            padding: 0.75rem 0;
            width: 100%;
            text-align: center;
            transition: all 0.4s ease;
            box-shadow: 0 4px 15px 0 rgba(59, 130, 246, 0.4);
        }
        
        .btn-primary:hover {
            background-position: right center; /* change the direction of the change here */
            transform: scale(1.03);
        }
        
        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* --- Upgraded Toggle Switch --- */
        .toggle-input:checked ~ .toggle-bg {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }

        .toggle-input:checked ~ .toggle-bg .toggle-dot {
            transform: translateX(100%);
            background-color: #ffffff;
        }

        #toast {
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(40px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            background: #27272a;
            color: #e5e7eb;
            border: 1px solid rgba(255,255,255,0.2);
        }

        #toast svg { width: 22px; height: 22px; flex-shrink:0; }
        #toast.success svg { color: #22c55e; }
        #toast.error svg { color: #ef4444; }
        #toast.warn svg { color: #f97316; }

    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 relative">
    <canvas id="particles"></canvas>

    <div id="mainCard" class="glass rounded-3xl shadow-2xl p-6 md:p-8 w-full max-w-6xl grid grid-cols-1 lg:grid-cols-2 gap-8 opacity-0 translate-y-10">
        
        <!-- LEFT SIDE -->
        <div class="flex flex-col justify-between">
            <div>
                <div class="text-center mb-6">
                    <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">ðŸ’³ CC Generator</h1>
                    <p class="text-gray-400 mt-2 text-sm md:text-base">Generate valid credit card numbers for testing purposes.</p>
                </div>

                <label class="block mb-2 text-sm font-semibold text-gray-300">BIN / Pattern:</label>
                <input type="text" id="bin" placeholder="e.g., 456789xxxxxx"
                    class="w-full mb-4 p-3 rounded-xl glass outline-none">

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block mb-2 text-sm font-semibold text-gray-300">Month:</label>
                        <select id="month" class="w-full p-3 rounded-xl glass outline-none">
                            <option value="random">Random</option>
                            <option>01</option><option>02</option><option>03</option><option>04</option>
                            <option>05</option><option>06</option><option>07</option><option>08</option>
                            <option>09</option><option>10</option><option>11</option><option>12</option>
                        </select>
                    </div>
                    <div>
                        <label class="block mb-2 text-sm font-semibold text-gray-300">Year:</label>
                        <select id="year" class="w-full p-3 rounded-xl glass outline-none">
                            <option value="random">Random</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block mb-2 text-sm font-semibold text-gray-300">CVV2:</label>
                        <input type="text" id="cvv" placeholder="Random"
                            class="w-full p-3 rounded-xl glass outline-none">
                    </div>
                    <div>
                        <label class="block mb-2 text-sm font-semibold text-gray-300">Quantity:</label>
                        <input type="number" id="qty" value="10" min="1" max="50"
                            class="w-full p-3 rounded-xl glass outline-none">
                    </div>
                </div>
            </div>
            <button onclick="generate()" class="btn-primary mt-4">Generate Cards</button>
        </div>

        <!-- RIGHT SIDE -->
        <div class="flex flex-col">
            <label class="block mb-2 text-center font-semibold text-gray-300">Generated Cards:</label>
            <div class="rounded-xl glass flex-1 flex flex-col overflow-hidden">
                <div class="overflow-y-auto">
                    <table class="w-full text-left">
                        <thead class="text-xs text-gray-400 uppercase sticky top-0">
                            <tr>
                                <th class="px-4 py-3 font-semibold w-[65%]">Card Details</th>
                                <th class="px-4 py-3 font-semibold text-center w-[35%]">Action</th>
                            </tr>
                        </thead>
                        <tbody id="ccTableBody" class="text-sm divide-y divide-white/5">
                            <!-- JS will populate this -->
                             <tr class="text-center">
                                <td colspan="2" class="p-8 text-gray-500">Click "Generate Cards" to start</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mt-4 gap-4">
                <button onclick="copyAll()" class="btn-secondary font-bold rounded-xl py-3 px-6 transition w-full sm:w-auto">COPY ALL</button>
                
                <label for="ccOnlyToggle" class="flex items-center cursor-pointer">
                    <div class="relative">
                        <input type="checkbox" id="ccOnlyToggle" class="toggle-input sr-only">
                        <div class="toggle-bg bg-gray-600 border-2 border-gray-500 h-6 w-11 rounded-full transition-colors"></div>
                        <div class="toggle-dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform"></div>
                    </div>
                    <div class="ml-3 text-gray-300 text-sm font-medium">
                        Copy Card Number Only
                    </div>
                </label>
            </div>
        </div>

    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-6 left-1/2 -translate-x-1/2 px-6 py-3 rounded-xl font-semibold">
        <svg id="toastIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></svg>
        <span id="toastMsg"></span>
    </div>

    <script>
        window.addEventListener("load", () => {
            gsap.to("#mainCard", { opacity: 1, y: 0, duration: 1, ease: "power3.out" });
        });

        const yearSelect = document.getElementById('year');
        const currentFullYear = new Date().getFullYear();
        for (let i = 0; i < 15; i++) {
            const year = (currentFullYear + i).toString().slice(-2);
            const option = document.createElement('option');
            option.value = year;
            option.textContent = (currentFullYear + i).toString();
            yearSelect.appendChild(option);
        }
        
        // --- Updated showToast function ---
        function showToast(msg, type = "success") {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toastIcon');
            const msgSpan = document.getElementById('toastMsg');
            
            toast.className = toast.className.replace(/\bsuccess\b|\berror\b|\bwarn\b/g, '');
            toast.classList.add(type);
            
            if (type === "success") icon.innerHTML = '<polyline points="20 6 9 17 4 12"></polyline>';
            if (type === "error") icon.innerHTML = '<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>';
            if (type === "warn") icon.innerHTML = '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line>';
            
            msgSpan.innerText = msg;
            gsap.killTweensOf(toast);
            gsap.fromTo(toast, { y: 40, opacity: 0 }, { y: 0, opacity: 1, duration: 0.4, ease: "power2.out" });
            gsap.to(toast, { opacity: 0, y: 40, delay: 2.5, duration: 0.6, ease: "power2.in" });
        }

        function randomDigit() { return Math.floor(Math.random() * 10); }

        function isValidLuhn(number) {
            let sum = 0, shouldDouble = false;
            for (let i = number.length - 1; i >= 0; i--) {
                let digit = parseInt(number[i]);
                if (shouldDouble) { if ((digit *= 2) > 9) digit -= 9; }
                sum += digit;
                shouldDouble = !shouldDouble;
            }
            return sum % 10 === 0;
        }
        
        function generatePattern(pattern, isAmex) {
            let cleanPattern = pattern.replace(/\s|-/g, '');
            let targetLength = isAmex ? 15 : 16;
            if (cleanPattern.length > targetLength) cleanPattern = cleanPattern.substring(0, targetLength);
            
            for (let attempt = 0; attempt < 1000; attempt++) {
                let candidate = "";
                for (let ch of cleanPattern) candidate += /[xX#]/.test(ch) ? randomDigit() : ch;
                
                if (candidate.length >= targetLength) {
                     if (isValidLuhn(candidate.substring(0, targetLength))) return candidate.substring(0, targetLength);
                     continue;
                }

                while (candidate.length < targetLength - 1) candidate += randomDigit();
                
                let checksum = 0;
                let shouldDouble = true;
                for (let i = targetLength - 2; i >= 0; i--) {
                    let digit = parseInt(candidate[i]);
                    if (shouldDouble) { if ((digit *= 2) > 9) digit -= 9; }
                    checksum += digit;
                    shouldDouble = !shouldDouble;
                }
                const lastDigit = (10 - (checksum % 10)) % 10;
                candidate += lastDigit;

                if (candidate.length === targetLength && isValidLuhn(candidate)) return candidate;
            }
            return null;
        }

        function randomNum(length) { return Array.from({ length }, () => randomDigit()).join(''); }

        function generate() {
            const tableBody = document.querySelector("#ccTableBody");
            tableBody.innerHTML = "";

            let pattern = document.getElementById('bin').value.trim();
            let month = document.getElementById('month').value;
            let year = document.getElementById('year').value;
            let cvv = document.getElementById('cvv').value;
            let qty = parseInt(document.getElementById('qty').value);
            let output = [];

            if (pattern.length < 6) { showToast("Pattern must be at least 6 digits!", "error"); return; }
            if (qty > 50) { qty = 50; document.getElementById('qty').value = 50; showToast("Max quantity is 50!", "warn");}


            const isAmex = pattern.startsWith("34") || pattern.startsWith("37");
            const now = new Date();
            const currentYear = now.getFullYear() % 100;
            const currentMonth = now.getMonth() + 1;

            for (let i = 0; i < qty; i++) {
                let card = generatePattern(pattern, isAmex);
                if (!card) continue;

                let mm, yy;
                if (year === "random") {
                    let startYear = currentYear;
                    yy = Math.floor(Math.random() * 10) + startYear; // Generate year up to 9 years in future
                    
                    let startMonth = (yy === currentYear) ? currentMonth : 1;
                    mm = String(Math.floor(Math.random() * (12 - startMonth + 1) + startMonth)).padStart(2, '0');
                } else {
                    yy = year;
                    let startMonth = (parseInt(yy) === currentYear) ? currentMonth : 1;
                    mm = (month === "random")
                        ? String(Math.floor(Math.random() * (12 - startMonth + 1) + startMonth)).padStart(2, '0')
                        : month;
                }

                let cvvLength = isAmex ? 4 : 3;
                let ccv = (cvv === "") ? randomNum(cvvLength) : cvv.padStart(cvvLength, '0');

                output.push(`${card}|${mm}|${yy}|${ccv}`);
            }
            
            if (output.length === 0) {
                 showToast("Could not generate cards with this pattern.", "error");
                 tableBody.innerHTML = `<tr class="text-center"><td colspan="2" class="p-8 text-gray-500">No cards generated. Try a different pattern.</td></tr>`;
                 return;
            }

            output.forEach((line, index) => {
                const [card, mm, yy, ccv] = line.split('|');
                const row = document.createElement("tr");
                row.className = 'hover:bg-white/5';
                row.innerHTML = `
                    <td class="px-4 py-3 font-mono text-base whitespace-nowrap">${card.replace(/(\d{4})/g, '$1 ').trim()} | ${mm}/${yy} | ${ccv}</td>
                    <td class="px-4 py-3 text-center">
                        <button class="bg-blue-600 text-white px-4 py-1.5 rounded-lg hover:bg-blue-700 transition text-xs font-semibold"
                            onclick="copySingle(this)">Copy</button>
                    </td>
                `;
                row.dataset.line = line;
                tableBody.appendChild(row);
                gsap.from(row, { opacity: 0, x: -20, duration: 0.5, delay: index * 0.05, ease: "power2.out" });
            });

            showToast(`${output.length} Cards Generated!`, "success");
        }
        
        // --- Updated copy functions ---
        function copySingle(btn) {
            const row = btn.closest('tr');
            const line = row.dataset.line;
            const ccOnly = document.getElementById('ccOnlyToggle').checked;
            const textToCopy = ccOnly ? line.split('|')[0] : line;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                showToast(ccOnly ? "Card number copied!" : "Full data copied!", "success");
                btn.textContent = 'Copied!';
                gsap.to(btn, {backgroundColor: '#16a34a', duration: 0.3});
                setTimeout(() => {
                    btn.textContent = 'Copy';
                     gsap.to(btn, {backgroundColor: '#2563eb', duration: 0.3});
                }, 1500);
            });
        }

        function copyAll() {
            const ccOnly = document.getElementById('ccOnlyToggle').checked;
            const lines = [...document.querySelectorAll("#ccTableBody tr")]
                .map(row => row.dataset.line);
            if (lines.length === 0 || !lines[0]) { showToast("Nothing to copy!", "warn"); return; }
            
            const textToCopy = ccOnly ? lines.map(line => line.split('|')[0]).join('\n') : lines.join('\n');
            navigator.clipboard.writeText(textToCopy);
            showToast(ccOnly ? "All card numbers copied!" : "All data copied!", "success");
        }

        // Particle background
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();
        function createParticles() {
            particles = [];
            let particleCount = Math.floor(canvas.width * canvas.height / 25000);
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 1.5 + 0.5,
                    dx: (Math.random() - 0.5) * 0.3,
                    dy: (Math.random() - 0.5) * 0.3
                });
            }
        }
        createParticles();
        function drawParticles() {
            if(canvas.width === 0) resizeCanvas();
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                ctx.fill();
                p.x += p.dx;
                p.y += p.dy;
                if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
            });
            requestAnimationFrame(drawParticles);
        }
        drawParticles();
    </script>
</body>
</html>
